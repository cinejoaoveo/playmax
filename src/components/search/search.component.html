<div class="fixed inset-0 bg-black/90 backdrop-blur-sm z-[100] flex flex-col" (click)="closeSearch()">
  <div class="w-full max-w-4xl mx-auto p-4 md:p-8" (click)="$event.stopPropagation()">
      <!-- Search Input and Close Button -->
      <div class="relative mb-8">
          <input 
            type="text" 
            placeholder="Buscar por filmes e sÃ©ries..."
            [ngModel]="searchTerm()"
            (ngModelChange)="onSearchTermChange($event)"
            #searchInput="ngModel"
            class="w-full bg-gray-800/50 border-2 border-gray-700 text-white placeholder-gray-400 text-xl md:text-2xl rounded-full py-3 pl-14 pr-4 focus:ring-pink-500 focus:border-pink-500"
            autofocus
          >
          <div class="absolute left-4 top-1/2 -translate-y-1/2 text-gray-400">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" /></svg>
          </div>
          <button (click)="closeSearch()" class="absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white">
             <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" /></svg>
          </button>
      </div>

      <!-- Results -->
      <div class="overflow-y-auto max-h-[calc(100vh-150px)] px-4">
          @if (isLoading()) {
            <p class="text-center text-gray-400">Buscando...</p>
          } @else if (searchResults().length > 0) {
            <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4 md:gap-6">
                @for(item of searchResults(); track item.id) {
                    <div (click)="closeSearch()">
                       <app-media-card [mediaItem]="item"></app-media-card>
                    </div>
                }
            </div>
          } @else if (searchTerm().length > 2) {
             <p class="text-center text-gray-400">Nenhum resultado encontrado para "{{ searchTerm() }}".</p>
          }
      </div>
  </div>
</div>